env: "prod"  # "prod" or "paper"

kis:
  env: "prod"
  base_url_prod: "https://openapi.koreainvestment.com:9443"
  base_url_paper: "https://openapivts.koreainvestment.com:29443"
  ws_url_prod: "ws://ops.koreainvestment.com:21000"
  ws_url_paper: "ws://ops.koreainvestment.com:31000"
  app_key: "${KIS_APP_KEY}"
  app_secret: "${KIS_APP_SECRET}"
  account_no: "${KIS_ACCOUNT_NO}"  # 예: 00000000-01
  custtype: "P"
  token_cache_path: ".cache/kis_token.json"
  rate_limit_sleep_sec: 0.5

logging:
  level: "INFO"
  path: "logs/bnf_trader.log"

trading:
  ord_dvsn: "01"         # 01=시장가, 00=지정가
  order_value: 50000     # 포지션당 목표 금액(원, 잔고 없을 때 기준)

telegram:
  enabled: false
  token: "${TG_BOT_TOKEN}"
  chat_id: "${TG_CHAT_ID}"

discord:
  enabled: true
  webhook: "${DISCORD_WEBHOOK_URL}"

backtest:
  initial_cash: 10000000
  max_positions: 10

# DB -> CSV export
export_csv:
  enabled: true
  out_dir: "data/csv"
  mode: "append"      # "overwrite" | "timestamped" | "append"
  tables: []          # empty = all tables

monitor:
  enabled: false
  scan_interval_sec: 60
  rest_batch_size: 30
  rest_max_retries: 5
  max_ws_subs: 20
  subscribe_cooldown_sec: 180
  alert_cooldown_sec: 600
  universe_paths:
    - "data/universe_kospi100.csv"
    - "data/universe_kosdaq150.csv"
  state_path: "data/monitor_state.json"
  ws_tr_id: "H0STCNT0"
  signal:
    type: "disparity_threshold"
    disparity_threshold: -0.08
    use_intraday: true

# 예시 전략 파라미터(실제 운영 시 strategy.yaml로 분리 가능)
strategy:
  liquidity_rank: 300
  min_amount: 50000000000  # 500억
  disparity_buy_kospi: -0.05
  disparity_buy_kosdaq: -0.10
  disparity_sell: -0.01
  stop_loss: -0.05
  max_holding_days: 3

# Discord on by default
